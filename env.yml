# Conda environment for fine-tuning LLMs with SFT and QLoRA
name: crm-dedup-llm
channels:
  - pytorch
  - nvidia
  - conda-forge
dependencies:
  # Core Python and CUDA setup
  - python=3.12
  - pip
  - pytorch::pytorch-cuda=12.1

  # Python packages installed via pip
  - pip:
      # --- Core ML & LLM Libraries ---

      # Corrected transformers version.
      # ">=4.44.0" ensures a modern, existing version is installed that
      # is compatible with the sft_train.py script.
      - "transformers==4.53.1"

      # Hugging Face ecosystem for data, training, and PEFT
      - datasets
      - accelerate
      - peft
      - trl
      - evaluate

      # Quantization library for QLoRA
      - bitsandbytes

      # Libraries for inference and generation (from original file)
      - vllm
      - outlines
      - "sglang>=0.3.0"

      # --- Utility Libraries ---

      # For parsing YAML config files
      - pyyaml

      # For version checking in the training script
      - packaging

      # General data handling and async requests
      - pandas
      - aiohttp
      - scikit-learn
